## Зарегистрируйтесь в системе в консольном режиме с правами `root`. Используя команду `cat` с правами `root`, просмотрите содержимое файлов `/etc/passwd` и `/etc/shadow`. Вам необходимо создать учетные записи и определить права доступа для десяти (10) сотрудников: `w_gromov`, `n_kalinina`, `e_ivanova`, `r_klinova`, `b_rebrov`, `k_beglov`, `i_frolov`, `d_lavrov`, `m_kruglov`, `t_uporov`, работающих в одном подразделении и занятых созданием и редактированием текстовых документов различного уровня конфиденциальности. Разграничение доступа к информации должно быть произведено на основании следующих требований: - допуск к секретным сведениям имеют четыре пользователя: `w_gromov`, `n_kalinina`, `b_rebrov`, `k_beglov`; - три пользователя: `n_kalinina`, `b_rebrov`, `k_beglov` работают над созданием секретных документов, каждый по своему профилю. Их домашние каталоги и файлы должны быть полностью недоступными как друг для друга, так и для всех остальных, исключая `w_gromov`; - три пользователя: `i_frolov`, `d_lavrov`, `e_ivanova` имеют допуск к конфиденциальной информации и работают над документами с соответствующим грифом. Они имеют право читать файлы с конфиденциальной информацией, созданные своими коллегами, без права их модификации; - все секретоносители имеют право знакомиться с конфиденциальными файлами; - три пользователя: `r_klinova`, `m_kruglov`, `t_uporov` могут работать только с открытой информацией. Их файлы должны быть доступны для чтения каждому сотруднику подразделения (без права модификации); - `w_gromov` является редактором подразделения и имеет право читать и модифицировать файлы всех сотрудников и всех уровней конфиденциальности. Завершенные документы копируются пользователем `w_gromov` в его домашний каталог, который должен быть недоступен для всех остальных сотрудников подразделения. Укажите в отчете, какие коллизии вы усматриваете в сформулированных требованиях? Как реализовать указанные требования таким образом, чтобы пользователи не могли по своему усмотрению изменять установленный порядок?

> [!IMPORTANT]
> Я пользовался терминалом, которое открывается через приложение `Konsole`.

Создадим учетную запись `w_gromov`, используя команду ниже: 

```bash
sudo useradd -u 510  -d /home/w_gromov -m -p gromov510 w_gromov
```

<details>
  <summary>Что вообще делает данная команда?</summary>

Команда `sudo useradd -u 510 -d /home/w_gromov -m -p gromov510 w_gromov` выполняет следующие действия:

- `sudo`: Запускает команду с правами суперпользователя (`root`). Это необходимо для выполнения операций, требующих повышенных привилегий, таких как добавление нового пользователя.
- `useradd`: Это команда для создания нового пользователя в системе.
- `-u 510`: Указывает `UID` (идентификатор пользователя) нового пользователя. В данном случае `UID` будет 510.
- `-d /home/w_gromov`: Указывает домашний каталог для нового пользователя. В данном случае домашний каталог будет `/home/w_gromov`.
- `-m`: Создает домашний каталог, если он не существует. Это означает, что будет создан каталог `/home/w_gromov`.
- `-p gromov510`: Указывает пароль для нового пользователя в зашифрованном виде. Однако, если пароль не зашифрован, это может привести к проблемам с безопасностью. Обычно для установки пароля рекомендуется использовать команду passwd после создания пользователя.
- `w_gromov`: Это имя нового пользователя, который будет создан.

Таким образом, данная команда создает нового пользователя с именем `w_gromov`, `UID 510`, домашним каталогом `/home/w_gromov`, и устанавливает (или пытается установить) пароль `gromov510`.
</details>

> [!IMPORTANT]
> - В дальнейших командах фигурирует дата, вам нужно будет поменять дату на момент сдачи. Для чего? Читайте в пояснении ниже.
> - Не пугайтесь `WARNING` при создании пользователя, все вполне нормально дальше будет работать.  

Теперь создадим пользователя `n_kalinina`, используя команду ниже: 

```bash
sudo useradd -u 508 -d /home/n_kalinina -m -p kalinina508 -e 2024-12-31 n_kalinina
```

<details>
  <summary>Что делает данная команда?</summary>

  Давайте разберем команду `sudo useradd -u 508 -d /home/n_kalinina -m -p kalinina508 -e 2024-12-31 n_kalinina` по частям:
  
  - `sudo`: Запускает команду с правами суперпользователя (root). Это необходимо для выполнения операций, требующих повышенных привилегий, таких как добавление нового пользователя.
  - `useradd`: Это команда для создания нового пользователя в системе.
  - `-u 508`: Указывает `UID` (идентификатор пользователя) нового пользователя. В данном случае `UID` будет 508.
  - `-d /home/n_kalinina`: Указывает домашний каталог для нового пользователя. В данном случае домашний каталог будет `/home/n_kalinina`.
  - `-m`: Создает домашний каталог, если он не существует. Это означает, что будет создан каталог `/home/n_kalinina`.
  - `-p kalinina508`: Указывает пароль для нового пользователя в зашифрованном виде. Однако, как и в предыдущем примере, если пароль не зашифрован, это может привести к проблемам с безопасностью. Обычно для установки пароля рекомендуется использовать команду passwd после создания пользователя.
  - `-e 2024-12-31`: Указывает дату истечения срока действия учетной записи пользователя. В данном случае учетная запись пользователя n_kalinina будет недоступна после 31 декабря 2024 года.
  - `n_kalinina`: Это имя нового пользователя, который будет создан.

Таким образом, данная команда создает нового пользователя с именем `n_kalinina`, `UID 508`, домашним каталогом `/home/n_kalinina`, устанавливает (или пытается установить) пароль `kalinina508`, и задает дату истечения учетной записи на 31 декабря 2024 года.
</details>

Теперь создадим пользователя `e_ivanova`, используя команду ниже: 

```bash
sudo useradd -u 505 -d /home/e_ivanova -m -p parolparol -e 2024-09-31 e_ivanova
```

Теперь создадим пользователя `r_klinova`, используя команду ниже: 

```bash
sudo useradd -u 509 -d /home/r_klinova -m -p parolparol -e 2024-06-31 r_klinova
```

Теперь создадим пользователя `b_rebrov`, используя команду ниже: 

```bash
sudo useradd -u 503 -d /home/b_rebrov -m -p rebrov503 -e 2024-07-31 b_rebrov
```

Теперь создадим пользователя `k_beglov`, используя команду ниже: 

```bash
sudo useradd -u 507 -d /home/k_beglov -m -p beglov507 -e 2024-08-20 k_beglov
```

Теперь создадим пользователя `i_frolov`, используя команду ниже:

```bash
sudo useradd -u 501 -d /home/i_frolov -m -p frolov501 -e 2024-12-10 i_frolov
```

Теперь создадим пользователя `d_lavrov`, используя команду ниже:

```bash
sudo useradd -u 504 -d /home/d_lavrov -m -p lavrov504 -e 2024-12-31 d_lavrov
```

Теперь создадим пользователя `m_kruglov`, используя команду ниже: 

```bash
sudo useradd -u 502 -d /home/m_kruglov -m -p kruglov502 -e 2024-12-31 m_kruglov
```

Теперь создадим пользователя `t_uporov`, используя команду ниже: 

```bash
sudo useradd -u 506 -d /home/t_uporov -m -p uporov506 -e 2024-12-31 t_uporov
```

Теперь создаём группы секретности для пользователей с допуском к секретным сведениям:

```bash
groupadd secret
```

Теперь создаём группы секретности для пользователей с допуском к конфиденциальным сведениям:

```bash
groupadd confidential
```

Теперь создаем группы секретности для пользователей, работающих только с открытой информацией:

```bash
groupadd open
```

Добавляем пользователей в группу `secret`:

```bash
usermod -aG secret w_gromov
usermod -aG secret n_kalinina
usermod -aG secret b_rebrov
usermod -aG secret k_beglov
```

Добавляем пользователей в группу `confidential`:

```bash
usermod -aG confidential i_frolov
usermod -aG confidential d_lavrov
usermod -aG confidential e_ivanova
```

Добавляем пользователей в группу `open`:

```bash
usermod -aG open r_klinova
usermod -aG open m_kruglov
usermod -aG open t_uporov
```

Настройка прав `n_kalinina`, `b_rebrov`, `k_beglov`:

```bash
chmod 700 /home/n_kalinina
chmod 700 /home/b_rebrov
chmod 700 /home/k_beglov
```

i_frolov, d_lavrov, e_ivanova:
mkdir /home/confidential
chown root:confidential /home/confidential
chmod 770 /home/confidential

r_klinova, m_kruglov, t_uporov:
mkdir /home/open
chown root:open /home/open
chmod 755 /home/open
chmod g+s /home/open

w\_gromov:** Его домашний каталог должен быть недоступен для всех остальных:
chmod 700 /home/w_gromov

Настройка прав доступа к файлам:

**Секретные файлы:**
Файлы, создаваемые n\_kalinina, b\_rebrov и k\_beglov, должны быть доступны только им самим и w\_gromov. 
Права на файлы, создаваемые в их домашних каталогах, будут определяться `umask`. Чтобы обеспечить максимальную защиту, 
можно изменить `umask` для этих пользователей в их `.bashrc` файлах:

echo "umask 077" >> /home/n_kalinina/.bashrc
echo "umask 077" >> /home/b_rebrov/.bashrc
echo "umask 077" >> /home/k_beglov/.bashrc

**Конфиденциальные файлы:**
Пользователи i\_frolov, d\_lavrov и e\_ivanova должны создавать свои файлы в `/home/confidential`. 
Пользователь владелец файла будет задавать права доступа.

**Открытые файлы:**
Пользователи r\_klinova, m\_kruglov и t\_uporov должны создавать свои файлы в `/home/open`. 
Пользователь владелец файла будет задавать права доступа.

Настройка прав доступа для w_gromov:

w\_gromov должен иметь возможность читать и модифицировать файлы всех сотрудников и всех уровней конфиденциальности. 
Самый простой способ реализовать это - добавить пользователя `w_gromov` в группу `sudo`.

